# –§–ò–ù–ê–õ–¨–ù–ê–Ø –ü–†–û–í–ï–†–ö–ê –í–°–ï–• –ò–ó–ú–ï–ù–ï–ù–ò–ô

## ‚úÖ –í–´–ü–û–õ–ù–ï–ù–ù–´–ï –ò–ó–ú–ï–ù–ï–ù–ò–Ø

### 1. Backend (Django REST API)

#### –§–∞–π–ª: `backend/presentation/api/v1/serializers/project.py`

**–ò–∑–º–µ–Ω–µ–Ω–∏–µ:** –î–æ–±–∞–≤–ª–µ–Ω–æ –ø–æ–ª–µ `is_purchased` –≤ —Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ç–æ—Ä—ã

- **ProjectItemListSerializer:**
  - –î–æ–±–∞–≤–ª–µ–Ω–æ: `is_purchased = serializers.SerializerMethodField()`
  - –î–æ–±–∞–≤–ª–µ–Ω –º–µ—Ç–æ–¥: `get_is_purchased(self, obj)` - –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç `obj.nomenclature_item.catalog_category.is_purchased`
  - –ü–æ–ª–µ –¥–æ–±–∞–≤–ª–µ–Ω–æ –≤ `fields`

- **ProjectItemDetailSerializer:**
  - –î–æ–±–∞–≤–ª–µ–Ω–æ: `is_purchased = serializers.SerializerMethodField()`
  - –î–æ–±–∞–≤–ª–µ–Ω –º–µ—Ç–æ–¥: `get_is_purchased(self, obj)` - –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç `obj.nomenclature_item.catalog_category.is_purchased`
  - –ü–æ–ª–µ –¥–æ–±–∞–≤–ª–µ–Ω–æ –≤ `fields`

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** API —Ç–µ–ø–µ—Ä—å –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç boolean –ø–æ–ª–µ `is_purchased` –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —ç–ª–µ–º–µ–Ω—Ç–∞ –ø—Ä–æ–µ–∫—Ç–∞.

---

### 2. Frontend (React + TypeScript)

#### –§–∞–π–ª: `frontend/src/features/projects/api.ts`

**–ò–∑–º–µ–Ω–µ–Ω–∏–µ:** –î–æ–±–∞–≤–ª–µ–Ω —Ç–∏–ø `is_purchased` –≤ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å `ProjectItem`

```typescript
export interface ProjectItem {
  // ... –æ—Å—Ç–∞–ª—å–Ω—ã–µ –ø–æ–ª—è
  
  // Computed
  category?: string;
  category_display?: string;
  is_purchased?: boolean;  // ‚Üê –î–û–ë–ê–í–õ–ï–ù–û
  
  // ... –æ—Å—Ç–∞–ª—å–Ω—ã–µ –ø–æ–ª—è
}
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** TypeScript —Ç–µ–ø–µ—Ä—å –∑–Ω–∞–µ—Ç –æ –ø–æ–ª–µ `is_purchased`.

---

#### –§–∞–π–ª: `frontend/src/pages/projects/ProjectDetailPage.tsx`

**–ò–∑–º–µ–Ω–µ–Ω–∏–µ:** –û–±–Ω–æ–≤–ª–µ–Ω—ã —Ñ–∏–ª—å—Ç—Ä—ã –¥–ª—è —Ä–∞–∑–¥–µ–ª–µ–Ω–∏—è —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –Ω–∞ –∏–∑–≥–æ—Ç–∞–≤–ª–∏–≤–∞–µ–º—ã–µ –∏ –∑–∞–∫—É–ø–∞–µ–º—ã–µ

**–ë—ã–ª–æ:**
```typescript
const manufacturedItems = useMemo(() =>
  projectItems.filter((i: ProjectItem) => 
    !['material', 'standard_product', 'other_product'].includes(i.category || '')
  ),
  [projectItems]
);

const purchasedItems = useMemo(() =>
  projectItems.filter((i: ProjectItem) =>
    ['material', 'standard_product', 'other_product'].includes(i.category || '')
  ),
  [projectItems]
);
```

**–°—Ç–∞–ª–æ:**
```typescript
const manufacturedItems = useMemo(() =>
  projectItems.filter((i: ProjectItem) => !i.is_purchased),
  [projectItems]
);

const purchasedItems = useMemo(() =>
  projectItems.filter((i: ProjectItem) => i.is_purchased),
  [projectItems]
);
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è —Ç–µ–ø–µ—Ä—å –æ—Å–Ω–æ–≤–∞–Ω–∞ –Ω–∞ boolean —Ñ–ª–∞–≥–µ –≤–º–µ—Å—Ç–æ —Å—Ç—Ä–æ–∫–æ–≤—ã—Ö –∫–∞—Ç–µ–≥–æ—Ä–∏–π.

---

#### –§–∞–π–ª: `frontend/src/features/projects/components/ProjectStructureTable.tsx`

**–ò–∑–º–µ–Ω–µ–Ω–∏–µ:** –û–±–Ω–æ–≤–ª–µ–Ω—ã –≤—Å–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –∫–∞—Ç–µ–≥–æ—Ä–∏–π –Ω–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ `is_purchased`

**–õ–æ–∫–∞—Ü–∏–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–π:**
1. –£—Å–ª–æ–≤–∏–µ –≤ `rowClassName` - –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç CSS –∫–ª–∞—Å—Å –¥–ª—è —Å—Ç—Ä–æ–∫–∏
2. –†–µ–Ω–¥–µ—Ä –∫–æ–ª–æ–Ω–∫–∏ "–î–µ–π—Å—Ç–≤–∏—è" - –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Ä–∞–∑–Ω—ã–µ –∫–Ω–æ–ø–∫–∏ –¥–ª—è –∑–∞–∫—É–ø–∞–µ–º—ã—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤
3. –£—Å–ª–æ–≤–∏—è –≤ render —Ñ—É–Ω–∫—Ü–∏—è—Ö –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –∫–Ω–æ–ø–æ–∫ –∏ –∏–∫–æ–Ω–æ–∫

**–ë—ã–ª–æ (6+ –º–µ—Å—Ç):**
```typescript
['material', 'standard_product', 'other_product'].includes(record.category)
```

**–°—Ç–∞–ª–æ:**
```typescript
record.is_purchased === true
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –í—Å–µ UI —ç–ª–µ–º–µ–Ω—Ç—ã —Ç–µ–ø–µ—Ä—å –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –æ–ø—Ä–µ–¥–µ–ª—è—é—Ç –∑–∞–∫—É–ø–∞–µ–º—ã–µ vs –∏–∑–≥–æ—Ç–∞–≤–ª–∏–≤–∞–µ–º—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã.

---

## ‚úÖ –ü–†–û–í–ï–†–ö–ê –ò–ó–ú–ï–ù–ï–ù–ò–ô

### Backend –ø—Ä–æ–≤–µ—Ä–∫–∞:

```bash
# –°–∫—Ä–∏–ø—Ç: final_check.py
‚úì Project: –°–¢–ï–ù–î 001
‚úì Total items in DB: 132
‚úì Root has 8 direct children
‚úì is_purchased field: 27 purchased, 105 manufactured
‚úì Maximum tree depth: 6 levels
```

### –°–µ—Ä–≤–µ—Ä—ã:

```
‚úì Backend:  http://localhost:8000  (Django)
‚úì Frontend: http://localhost:3000  (Vite)
‚úì API Docs: http://localhost:8000/api/docs/
```

### –õ–æ–≥–∏–Ω:
- **Username:** admin
- **Password:** admin123

---

## ‚úÖ –ß–¢–û –ò–°–ü–†–ê–í–õ–ï–ù–û

### –ü—Ä–æ–±–ª–µ–º–∞:
- –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞ –æ—Ç–æ–±—Ä–∞–∂–∞–ª–∞ 19 —Å—Ç—Ä–æ–∫ "–≥–∞–π–∫–∞" + 31 —Å—Ç—Ä–æ–∫–∞ "–±–æ–ª—Ç" –≤–º–µ—Å—Ç–æ –∏–µ—Ä–∞—Ä—Ö–∏–∏
- –ü—Ä–∏—á–∏–Ω–∞: –Ω–µ—Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–π –º–µ–∂–¥—É backend (—Ä—É—Å—Å–∫–∏–µ –∫–æ–¥—ã) –∏ frontend (–∞–Ω–≥–ª–∏–π—Å–∫–∏–µ –∫–æ–¥—ã)

### –†–µ—à–µ–Ω–∏–µ:
- –î–æ–±–∞–≤–ª–µ–Ω–æ —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–æ–µ –ø–æ–ª–µ `is_purchased` (boolean) –≤ API
- Frontend —Ç–µ–ø–µ—Ä—å –∏—Å–ø–æ–ª—å–∑—É–µ—Ç boolean —Ñ–ª–∞–≥ –≤–º–µ—Å—Ç–æ –ø—Ä–æ–≤–µ—Ä–∫–∏ —Å—Ç—Ä–æ–∫–æ–≤—ã—Ö –∫–∞—Ç–µ–≥–æ—Ä–∏–π
- –°–∏—Å—Ç–µ–º–∞ –±–æ–ª—å—à–µ –Ω–µ –∑–∞–≤–∏—Å–∏—Ç –æ—Ç –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã—Ö –∫–æ–¥–æ–≤ –∫–∞—Ç–µ–≥–æ—Ä–∏–π

### –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:
1. ‚úÖ –ù–µ–∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å –æ—Ç —è–∑—ã–∫–∞ –∫–æ–¥–æ–≤ –∫–∞—Ç–µ–≥–æ—Ä–∏–π
2. ‚úÖ –ë–æ–ª–µ–µ –ø—Ä–æ—Å—Ç–∞—è –∏ –ø–æ–Ω—è—Ç–Ω–∞—è –ª–æ–≥–∏–∫–∞ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏
3. ‚úÖ –õ–µ–≥—á–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—Ç—å –∏ —Ä–∞—Å—à–∏—Ä—è—Ç—å
4. ‚úÖ –ú–µ–Ω—å—à–µ –æ—à–∏–±–æ–∫ –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –∫–∞—Ç–µ–≥–æ—Ä–∏–π

---

## üìã –°–õ–ï–î–£–Æ–©–ò–ï –®–ê–ì–ò –î–õ–Ø –ü–û–õ–¨–ó–û–í–ê–¢–ï–õ–Ø

### 1. –û—Ç–∫—Ä–æ–π—Ç–µ –±—Ä–∞—É–∑–µ—Ä
```
http://localhost:3000
```

### 2. –í–æ–π–¥–∏—Ç–µ –≤ —Å–∏—Å—Ç–µ–º—É
- –õ–æ–≥–∏–Ω: `admin`
- –ü–∞—Ä–æ–ª—å: `admin123`

### 3. –û—Ç–∫—Ä–æ–π—Ç–µ –ø—Ä–æ–µ–∫—Ç
- –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ —Ä–∞–∑–¥–µ–ª "–ü—Ä–æ–µ–∫—Ç—ã"
- –û—Ç–∫—Ä–æ–π—Ç–µ –ø—Ä–æ–µ–∫—Ç "–°–¢–ï–ù–î 001"

### 4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –≤–∫–ª–∞–¥–∫—É "–°—Ç—Ä—É–∫—Ç—É—Ä–∞"
- –î–æ–ª–∂–Ω–∞ –æ—Ç–æ–±—Ä–∞–∂–∞—Ç—å—Å—è –∏–µ—Ä–∞—Ä—Ö–∏—á–µ—Å–∫–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞
- –ö–æ—Ä–Ω–µ–≤–æ–π —ç–ª–µ–º–µ–Ω—Ç "–°–¢–ï–ù–î 001" —Å 8 –ø—Ä—è–º—ã–º–∏ –¥–µ—Ç—å–º–∏:
  1. –≥–∞–π–∫–∞ (–∏–∑–≥–æ—Ç–∞–≤–ª–∏–≤–∞–µ–º–∞—è, 0 –¥–µ—Ç–µ–π)
  2. —Ä–µ–ª–µ (–∑–∞–∫—É–ø–∞–µ–º–∞—è, 0 –¥–µ—Ç–µ–π)
  3. –°–∏—Å—Ç–µ–º–∞ 0002 (–∏–∑–≥–æ—Ç–∞–≤–ª–∏–≤–∞–µ–º–∞—è, 4 –¥–µ—Ç–µ–π)
  4. –°–∏—Å—Ç–µ–º–∞ 0001 (–∏–∑–≥–æ—Ç–∞–≤–ª–∏–≤–∞–µ–º–∞—è, 6 –¥–µ—Ç–µ–π)
  5. –ü–æ–¥—Å–∏—Å—Ç–µ–º–∞ 00003 (–∏–∑–≥–æ—Ç–∞–≤–ª–∏–≤–∞–µ–º–∞—è, 4 –¥–µ—Ç–µ–π)
  6. –ü–æ–¥—Å–∏—Å—Ç–µ–º–∞ 00002 (–∏–∑–≥–æ—Ç–∞–≤–ª–∏–≤–∞–µ–º–∞—è, 3 –¥–µ—Ç–µ–π)
  7. –ü–æ–¥—Å–∏—Å—Ç–µ–º–∞ 00001 (–∏–∑–≥–æ—Ç–∞–≤–ª–∏–≤–∞–µ–º–∞—è, 3 –¥–µ—Ç–µ–π)
  8. —Å–±. –µ–¥. 000003 (–∏–∑–≥–æ—Ç–∞–≤–ª–∏–≤–∞–µ–º–∞—è, 3 –¥–µ—Ç–µ–π)

### 5. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å
- ‚úÖ –†–∞–∑–≤–æ—Ä–∞—á–∏–≤–∞–Ω–∏–µ/—Å–≤–æ—Ä–∞—á–∏–≤–∞–Ω–∏–µ —É–∑–ª–æ–≤ –¥–µ—Ä–µ–≤–∞
- ‚úÖ –ö–æ—Ä—Ä–µ–∫—Ç–Ω–æ–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∏–∫–æ–Ω–æ–∫ –¥–ª—è –∑–∞–∫—É–ø–∞–µ–º—ã—Ö/–∏–∑–≥–æ—Ç–∞–≤–ª–∏–≤–∞–µ–º—ã—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤
- ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–∞—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è –≤ –≤–∫–ª–∞–¥–∫–∞—Ö "–ò–∑–≥–æ—Ç–∞–≤–ª–∏–≤–∞–µ–º—ã–µ"/"–ó–∞–∫—É–ø–∞–µ–º—ã–µ"

---

## üîß –¢–ï–•–ù–ò–ß–ï–°–ö–ê–Ø –î–û–ö–£–ú–ï–ù–¢–ê–¶–ò–Ø

### –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –∏–∑–º–µ–Ω–µ–Ω–∏–π:

```
DATABASE (PostgreSQL)
  ‚îî‚îÄ CatalogCategory.is_purchased (boolean)
       ‚Üì
BACKEND (Django REST)
  ‚îî‚îÄ ProjectItemSerializer.is_purchased (SerializerMethodField)
       ‚Üì
API (JSON)
  ‚îî‚îÄ {"id": 1, "name": "...", "is_purchased": true/false}
       ‚Üì
FRONTEND (React + TypeScript)
  ‚îî‚îÄ ProjectItem.is_purchased (boolean)
       ‚Üì
UI COMPONENTS
  ‚îî‚îÄ Filters, Icons, Actions based on is_purchased flag
```

### –§–∞–π–ª—ã –∏–∑–º–µ–Ω–µ–Ω–∏–π:
1. `backend/presentation/api/v1/serializers/project.py` - –¥–æ–±–∞–≤–ª–µ–Ω–æ –ø–æ–ª–µ is_purchased
2. `frontend/src/features/projects/api.ts` - –æ–±–Ω–æ–≤–ª–µ–Ω –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å ProjectItem
3. `frontend/src/pages/projects/ProjectDetailPage.tsx` - –æ–±–Ω–æ–≤–ª–µ–Ω—ã —Ñ–∏–ª—å—Ç—Ä—ã
4. `frontend/src/features/projects/components/ProjectStructureTable.tsx` - –æ–±–Ω–æ–≤–ª–µ–Ω–∞ –ª–æ–≥–∏–∫–∞ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è

---

## ‚úÖ –ó–ê–ö–õ–Æ–ß–ï–ù–ò–ï

**–í—Å–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤–Ω–µ—Å–µ–Ω—ã –∏ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω—ã:**
- ‚úÖ Backend –∏–∑–º–µ–Ω–µ–Ω–∏—è –ø—Ä–∏–º–µ–Ω–µ–Ω—ã –∏ —Å–µ—Ä–≤–µ—Ä –ø–µ—Ä–µ–∑–∞–ø—É—â–µ–Ω
- ‚úÖ Frontend –∏–∑–º–µ–Ω–µ–Ω–∏—è –ø—Ä–∏–º–µ–Ω–µ–Ω—ã –∏ hot-reload –æ–±–Ω–æ–≤–∏–ª –∫–æ–¥
- ‚úÖ –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö —Å–æ–¥–µ—Ä–∂–∏—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
- ‚úÖ API –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –ø–æ–ª–µ is_purchased
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ç–µ—Å—Ç—ã –ø—Ä–æ–π–¥–µ–Ω—ã

**–°–∏—Å—Ç–µ–º–∞ –≥–æ—Ç–æ–≤–∞ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é!**

–ï—Å–ª–∏ –ø—Ä–∏ –æ—Ç–∫—Ä—ã—Ç–∏–∏ –≤ –±—Ä–∞—É–∑–µ—Ä–µ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø–æ-–ø—Ä–µ–∂–Ω–µ–º—É –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ:
1. –û—á–∏—Å—Ç–∏—Ç–µ –∫—ç—à –±—Ä–∞—É–∑–µ—Ä–∞ (Ctrl+Shift+Delete)
2. –°–¥–µ–ª–∞–π—Ç–µ "–∂–µ—Å—Ç–∫—É—é" –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫—É —Å—Ç—Ä–∞–Ω–∏—Ü—ã (Ctrl+Shift+R)
3. –û—Ç–∫—Ä–æ–π—Ç–µ –∫–æ–Ω—Å–æ–ª—å —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞ (F12) –∏ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ:
   - Network tab: —É–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ API –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç is_purchased
   - Console tab: –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ JavaScript –æ—à–∏–±–æ–∫
